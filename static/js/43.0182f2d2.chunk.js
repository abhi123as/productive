"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[43],{1043:function(e,s,a){a.r(s);var r=a(4165),l=a(1413),t=a(885),i=a(5861),n=a(2791),o=a(2506),d=a(6863),c=a(8515),m=a(8182),u=a(5985),h=a(3329),p=d.Ry().shape({fname:d.Z_().min(1,"At least one Character Required").max(50,"Maximum 50 symbols").required("Name is required"),email:d.Z_().email("Wrong email format").min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required("Email is required"),phNo:d.Z_().min(10,"Minimum 10 symbols").required("Phone Number is required").matches(/\+91\d{10}/,"Invalid Mobile Number"),dob:d.Z_().min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required("DoB is required")});function f(){return(f=(0,i.Z)((0,r.Z)().mark((function e(s,a){var l,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8082/api/auth/update/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return l=e.sent,e.next=5,l.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.default=function(){var e=JSON.parse(localStorage.getItem("user")),s=(0,n.useState)({}),a=(0,t.Z)(s,2);a[0],a[1];function d(){return(d=(0,i.Z)((0,r.Z)().mark((function e(s){var a,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8082/api/auth/getUserById/".concat(s),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return l=e.sent,e.abrupt("return",l.user);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=(0,n.useState)(!1),b=(0,t.Z)(x,2),N=b[0],v=b[1],j=(0,c.k6)(),g=(0,n.useState)({fname:"",email:"",dob:"",phNo:""}),y=(0,t.Z)(g,2),w=y[0],Z=y[1];(0,n.useEffect)((function(){(function(e){return d.apply(this,arguments)})(e.userId).then((function(e){Z({fname:(null===e||void 0===e?void 0:e.username)||"",email:(null===e||void 0===e?void 0:e.userEmail)||"",dob:(null===e||void 0===e?void 0:e.userDateOfBirth)||"",phNo:(null===e||void 0===e?void 0:e.userPhone)||""})}))}),[]);var k=(0,o.TA)({initialValues:w,validationSchema:p,enableReinitialize:!0,onSubmit:function(s,a){var r=a.setStatus;a.setFieldValue;if(v(!0),r(!1),v(!0),s===w)r("Same Data as Previous,unable to update"),v(!1);else{var l={userName:s.fname,userEmail:s.email,userDateOfBirth:s.dob,userPhone:s.phNo},t=function(e,s){return f.apply(this,arguments)}(e.userId,l);t.then((function(e){u.Am.success(e.message+", Pls Refresh the page",{hideProgressBar:!0})})),v(!1),j.push("/todo")}}});return(0,h.jsx)("div",{className:"card card-custom w-50 mx-auto",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("form",{className:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",noValidate:!0,id:"resetForm",onSubmit:k.handleSubmit,children:[(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)("h1",{className:"text-dark",children:"Profile"})}),(0,h.jsx)("div",{className:"w-5 text-center mb-10",children:(0,h.jsx)("i",{className:"bi bi-person-circle fs-1"})}),k.status&&(0,h.jsxs)("div",{className:"mb-lg-15 alert d-flex justify-content-between alert-danger",children:[(0,h.jsx)("div",{className:"alert-text font-weight-bold",children:k.status}),(0,h.jsx)("div",{})]}),(0,h.jsxs)("dl",{children:[(0,h.jsx)("div",{className:"row fv-row ",children:(0,h.jsxs)("div",{className:"fv-row mb-6",children:[(0,h.jsxs)("dt",{children:[(0,h.jsx)("label",{className:'class="form-label fw-bolder text-dark required',children:"Name"}),(0,h.jsx)("input",(0,l.Z)((0,l.Z)({id:"fname",placeholder:"Enter name",type:"text",autoComplete:"off"},k.getFieldProps("fname")),{},{className:(0,m.Z)("form-control form-control-lg form-control-solid")}))]}),(0,h.jsx)("dd",{className:"position-absolute",children:k.touched.fname&&k.errors.fname&&(0,h.jsx)("div",{className:"fv-plugins-message-container",children:(0,h.jsx)("div",{className:"fv-help-block",children:(0,h.jsx)("span",{role:"alert",className:"text-danger",children:k.errors.fname})})})})]})}),(0,h.jsxs)("div",{className:"fv-row mb-6",children:[(0,h.jsxs)("dt",{children:[(0,h.jsx)("label",{className:"form-label fw-bolder text-dark required",children:"Email"}),(0,h.jsx)("input",(0,l.Z)((0,l.Z)({placeholder:"Email",type:"email",id:"email",autoComplete:"off"},k.getFieldProps("email")),{},{className:(0,m.Z)("form-control form-control-lg form-control-solid")}))]}),(0,h.jsx)("dd",{className:"position-absolute",children:k.touched.email&&k.errors.email&&(0,h.jsx)("div",{className:"fv-plugins-message-container",children:(0,h.jsx)("div",{className:"fv-help-block",children:(0,h.jsx)("span",{role:"alert",className:"text-danger",children:k.errors.email})})})})]}),(0,h.jsxs)("div",{className:"fv-row mb-6",children:[(0,h.jsxs)("dt",{children:[(0,h.jsx)("label",{className:'class="form-label fw-bolder text-dark required',children:"Date of birth"}),(0,h.jsx)("input",(0,l.Z)((0,l.Z)({placeholder:"23/02/1999",type:"date",id:"dob",autoComplete:"off"},k.getFieldProps("dob")),{},{className:(0,m.Z)("form-control form-control-lg form-control-solid")}))]}),(0,h.jsx)("dd",{className:"position-absolute",children:k.touched.dob&&k.errors.dob&&(0,h.jsx)("div",{className:"fv-plugins-message-container",children:(0,h.jsx)("div",{className:"fv-help-block",children:(0,h.jsx)("span",{role:"alert",className:"text-danger",children:k.errors.dob})})})})]}),(0,h.jsxs)("div",{className:"fv-row mb-6",children:[(0,h.jsxs)("dt",{children:[(0,h.jsx)("label",{className:"form-label fw-bolder text-dark required",children:"Phone"}),(0,h.jsx)("div",{className:""}),(0,h.jsx)("input",(0,l.Z)((0,l.Z)({placeholder:"Enter phone No",type:"text",id:"phNo",autoComplete:"off"},k.getFieldProps("phNo")),{},{className:(0,m.Z)("form-control form-control-lg form-control-solid")}))]}),(0,h.jsx)("dd",{className:"position-absolute",children:k.touched.phNo&&k.errors.phNo&&(0,h.jsx)("div",{className:"fv-plugins-message-container",children:(0,h.jsx)("div",{className:"fv-help-block",children:(0,h.jsx)("span",{role:"alert",className:"text-danger",children:k.errors.phNo})})})})]})]}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsxs)("button",{type:"submit",id:"kt_sign_up_submit",className:"btn btn-lg btn-primary w-100 mb-5",disabled:!k.isValid,children:[!N&&(0,h.jsx)("span",{className:"indicator-label",children:"Update"}),N&&(0,h.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,h.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]}),(0,h.jsx)("button",{type:"reset",id:"kt_login_signup_form_cancel_button",className:"btn btn-lg btn-light-primary w-100 mb-5",onClick:function(){return j.push("/todo")},children:"Cancel"})]})]})})})}}}]);
//# sourceMappingURL=43.0182f2d2.chunk.js.map